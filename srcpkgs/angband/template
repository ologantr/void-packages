# Template file for 'angband'
pkgname=angband
version=4.2.4
revision=1
build_style=gnu-configure
configure_args="--enable-sdl2 --enable-sdl2-mixer --disable-x11
 --enable-curses CFLAGS=-O2"
hostmakedepends="automake"
makedepends="SDL2_image-devel SDL2_mixer-devel SDL2_ttf-devel ncurses-devel"
short_desc="Free, single-player dungeon exploration game"
maintainer="Diogo Leal <diogo@diogoleal.com>"
license="GPL-2.0-or-later"
homepage="https://rephial.org/"
changelog="https://rephial.org/release/"
distfiles="https://github.com/angband/angband/archive/refs/tags/${version}.tar.gz"
checksum=8cf30b0f5c4d096e18a2896b81e5a8fa82215ebdcd3037502673fb70a6c30779

pre_configure() {
	NOCONFIGURE=1 ./autogen.sh
}

do_check() {
	mkdir -p /etc/angband/gamedata
	cp lib/gamedata/*.txt /etc/angband/gamedata/
	make tests
	rm -rf /etc/angband
}
